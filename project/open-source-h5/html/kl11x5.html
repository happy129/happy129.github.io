<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, target-densitydpi=high-dpi, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1,user-scalable=no,minimal-ui" />
<title>快乐11选5号码来源</title>
<link rel="stylesheet" type="text/css" href="css.css">
<script src="js/jquery.min.js"></script>
<script src="js/template.js"></script>
<script type="text/html" id="number">
    {{each list as val}}
    <ul>
        {{each val as vol}}
        <li>{{vol}}</li>
        {{/each}}
    </ul>
    {{/each}}
</script>
<script type="text/html" id="rule_number">
    <table class="rule_number">
    {{each list as val i}}
    {{if i==1}}
    <td colspan="11" style="height: 0.5rem"></td>
    {{/if}}
    {{each val as vol j}}
    <tr>
        {{if j==0}}
        <td>快乐8</td>
        {{else if j==1}}
        <td>对应</td>
        {{else if j==2}}
        <td>取号</td>
        {{/if}}
        {{each vol as value}}
        {{if value=='重复跳过'||value=='无效'||value=='移除'}}
        <td><span>{{value}}</span></td>
        {{else if j==2}}
        <td class="org">{{value}}</td>
        {{else}}
        <td>{{value}}</td>
        {{/if}}
        {{/each}}
    </tr>
    {{/each}}
    {{/each}}
    </table>
</script>
<script type="text/html" id="openNumber">
    <table class="rule_number rule_number2">
        <tr>
            <td>&nbsp;</td>
            <td>万位</td>
            <td>千位</td>
            <td>百位</td>
            <td>十位</td>
            <td>个位</td>
        </tr>
        <tr>
            <td>号码</td>
            {{each list as value}}
            <td>{{value}}</td>
            {{/each}}
        </tr>
    </table>
</script>
<script type="text/html" id="rule_number3">
    <table class="rule_number3">
    {{each list as val i}}
    {{each val as vol j}}
    <tr> 
        {{each vol as value}}
        {{if value[1]=='org'}}
        <td class="{{value[1]}}">{{value[0]}}<span class="sit">{{value[2]}}</span></td>
        {{else}}
        <td class="{{value[1]}}">{{value[0]}}</td>
        {{/if}}
        {{/each}}
    </tr>
    {{/each}}
    {{/each}}
    </table>
</script>
<script language="javascript" type="text/javascript">
    // 对接APP
    function openInfo(){
        // 获取开奖号码和对应期号
        var openInfo = $('input[name="openInfo"]').val(),
        //var openInfo = "05,79,33,62,45,08,57,20,44,32,11,52,27,36,80,75,55,26,38,29|756094",
            openInfo = openInfo.split('|'),
            issue = openInfo[1], // 期号
            number = openInfo[0].split(','), // 开奖号码
            length = 5;
        // 显示期号
        $('.kj_number h1 span').html(issue);
    // 处理号码
        // 号码拆分成等长二维
        var numberArr = [];
        numberArr.push(number.slice(0,10));
        numberArr.push(number.slice(10));
        // 显示开奖号码
        var numberHtml = template('number', {list: numberArr});
        $('.kj_number .box').html(numberHtml);
        // 开奖号码对应号码
        var ruleNumber = [];
        var openNumber = []; // 最终号码
        var openKlNumber = [];
        for(var i=0;i<numberArr.length;i++){
            ruleNumber[i] = [];
            ruleNumber[i][0] = [];
            ruleNumber[i][1] = [];
            ruleNumber[i][2] = [];
            for(var j=0;j<numberArr[i].length;j++){
            	ruleNumber[i][0].push(numberArr[i][j]);
                var num = parseInt(numberArr[i][j]) % 11;
                var num_1 = parseInt(numberArr[i][j]);
                if (num_1 == 78 || num_1 == 79 || num_1 == 80) {
                    num = '移除';
                    ruleNumber[i][1].push(num);
                }else{
                    if(num==0){
                        num = '11';
                    }else if(num<10){
                        num = '0'+num;
                    }else{
                        num = num.toString();
                    }
                    ruleNumber[i][1].push(num);
                    var openLength = openNumber.length,
                        exit = openNumber.indexOf(num);
                    if(openLength>=length){
                        num = '无效';
                    }else if(exit==-1){
                        openNumber.push(num);
                        openKlNumber.push(numberArr[i][j]);
                    }else{
                        num = '重复跳过';
                    }
                }
                ruleNumber[i][2].push(num);
            }
        }
        console.log(openKlNumber);
        var ruleHtml = template('rule_number', {list: ruleNumber});
        $('.rule_table').html(ruleHtml);
        if(openNumber.length<length){
            $('.foot_elven .box ul').append('<li class="false">本局无效</li>');
            for(var i=0;i<length;i++){
                if(!openNumber[i]){
                    openNumber[i] = '无';
                }
            }
        }else{
            for(var i=0;i<openNumber.length;i++){
                $('.foot_elven .box ul').append('<li>'+openNumber[i]+'</li>');
            }
        }
        var openHtml = template('openNumber', {list: openNumber});        
        $('.rule_table').append(openHtml);
        var mappingTable = [],
        	eightyball = [],
        	elvenball = [],
        	blue = 'blue',
            org = 'org';
        	// elvenball = ['01','02','03','04','05','06','07','08','09','10','11'];
        	// eightyball[0] = ['01','02','03','04','05','06','07','08','09','10','11'];
        	// eightyball[1] = ['12','13','14','15','16','17','18','19','20','21','22'];
        	// eightyball[2] = ['23','24','25','26','27','28','29','30','31','32','33'];
        	// eightyball[3] = ['34','35','36','37','38','39','40','41','42','43','44'];
        	// eightyball[4] = ['45','46','47','48','49','50','51','52','53','54','55'];
        	// eightyball[5] = ['56','57','58','59','60','61','62','63','64','65','66'];
        	// eightyball[6] = ['67','68','69','70','71','72','73','74','75','76','77'];
        	elvenball[0] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	elvenball[1] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	elvenball[2] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	elvenball[3] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	elvenball[4] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	elvenball[5] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	elvenball[6] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	eightyball[0] = [['01'],['02'],['03'],['04'],['05'],['06'],['07'],['08'],['09'],['10'],['11']];
        	eightyball[1] = [['12'],['13'],['14'],['15'],['16'],['17'],['18'],['19'],['20'],['21'],['22']];
        	eightyball[2] = [['23'],['24'],['25'],['26'],['27'],['28'],['29'],['30'],['31'],['32'],['33']];
        	eightyball[3] = [['34'],['35'],['36'],['37'],['38'],['39'],['40'],['41'],['42'],['43'],['44']];
        	eightyball[4] = [['45'],['46'],['47'],['48'],['49'],['50'],['51'],['52'],['53'],['54'],['55']];
        	eightyball[5] = [['56'],['57'],['58'],['59'],['60'],['61'],['62'],['63'],['64'],['65'],['66']];
        	eightyball[6] = [['67'],['68'],['69'],['70'],['71'],['72'],['73'],['74'],['75'],['76'],['77']];

        for(var i=0;i<7;i++){
        	for(var j=0;j<11;j++){
        		var kj = 0;
                var sit = 0;
        		for(var k=0;k<openKlNumber.length;k++){
        			if (eightyball[i][j][0]===openKlNumber[k]) {
        				kj = 1;
                        sit = k+1;
        			}
        		}
        		if(kj == 1){
        			eightyball[i][j].push('red')
        			elvenball[i][j].push(org)
                    elvenball[i][j].push(sit)
        		}else{
        			eightyball[i][j].push('')
        			elvenball[i][j].push(blue)
        		}
        	}
        	mappingTable[i] = [];
        	mappingTable[i].push(eightyball[i]);
        	mappingTable[i].push(elvenball[i]);
        }
        var mappHtml = template('rule_number3', {list: mappingTable});
        $('.mappingtable').html(mappHtml);
    }
</script>
<style type="text/css">

</style>
</head>
<body>
    <script language="javascript">
		// $(function(){
		// 	openInfo();
		// });
    </script>
    <input type="hidden" name="openInfo"></input>
    <!--<input type="hidden" name="openInfo" value="05,19,33,62,45,08,57,20,44,32,11,52,27,36,80,75,55,26,38,29|756094"></input>-->
	<div class="kl11x5">
        <section class="kj_number bdbt">
            <h1>北京快乐8第<span>-</span>期</h1>
            <div class="box"></div>
        </section>
        <section class="rule">
            <div class="count">计算</div>
            <div class="desc">1-11对应号码为01-11；12-22；23-33；34-44；45-55；
56-66；67-77。移除78、79、80。（重复则跳过，取前五位
有效号码，无法凑齐5个号码则本局无效。）</div>
        </section>
        <section class="rule_table"></section>
        <section class="kj_number bdbt">
            <h1>号码对应表</h1>
        </section>
        <section class="mappingtable">
            <table class="rule_number3">
                
            </table>
        </section>
        <section class="foot_elven">
            <div class="box">
                <ul>
                    <li style="color:#f4e60b;">开奖结果</li>
                </ul>
            </div>
        </section>
    </div>
</body>
</html>
